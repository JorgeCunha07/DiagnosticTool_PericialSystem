package org.dei;

import org.dei.facts.Resposta;
import org.dei.facts.model.Carro;
import org.dei.facts.model.Marca;
import org.dei.facts.model.ModeloCarro;
import org.dei.facts.model.Motor;
import org.dei.facts.model.Componente;
import java.util.List;

global java.util.List carros;  // List of Carro objects
global java.util.List<String> triggeredRules;
global org.slf4j.Logger LOG;

// Rule 01: Pergunta Marca do Carro
rule "R01: Pergunta Marca do Carro"
    when
        $resposta : Resposta(texto == null || texto == "")
    then
        System.out.println("Qual é a marca do carro?");
end

// Rule 02: Verifica Marca Selecionada
rule "R02: Verifica Marca Selecionada"
    when
        $resposta : Resposta(texto != null && texto != "")
        $marca : String() from $resposta.getTexto()  // Marca fornecida pelo usuário
        $carro : Carro( marca.getNome() == $marca ) from carros
    then
        System.out.println("Marca selecionada: " + $marca);
        System.out.println("Modelos disponíveis: ");
        for (ModeloCarro modelo : $carro.getMarca().getModelos()) {
            System.out.println(modelo.getNome());
        }
end

// Rule 03: Pergunta Modelo do Carro
rule "R03: Pergunta Modelo do Carro"
    when
        $resposta : Resposta(texto != null && texto != "")
        $marca : String() from $resposta.getTexto()  // Marca fornecida pelo usuário
        $carro : Carro( marca.getNome() == $marca ) from carros
    then
        System.out.println("Qual é o modelo do carro?");
end

// Rule 04: Verifica Modelo Selecionado
rule "R04: Verifica Modelo Selecionado"
    when
        $resposta : Resposta(texto != null && texto != "")
        $modelo : String() from $resposta.getTexto()  // Modelo fornecido pelo usuário
        $carro : Carro( modelo.getNome() == $modelo ) from carros
    then
        System.out.println("Modelo selecionado: " + $modelo);
        System.out.println("Motores disponíveis: ");
        for (Motor motor : $carro.getModelo().getMotores()) {
            System.out.println(motor.getNome());
        }
end

// Rule 05: Pergunta Motor do Carro
rule "R05: Pergunta Motor do Carro"
    when
        $resposta : Resposta(texto != null && texto != "")
        $modelo : String() from $resposta.getTexto()  // Modelo fornecido pelo usuário
        $carro : Carro( modelo.getNome() == $modelo ) from carros
    then
        System.out.println("Qual é o motor do carro?");
end

// Rule 06: Verifica Motor Selecionado
rule "R06: Verifica Motor Selecionado"
    when
        $resposta : Resposta(texto != null && texto != "")
        $motor : String() from $resposta.getTexto()  // Motor fornecido pelo usuário
        $carro : Carro( motor.getNome() == $motor ) from carros
    then
        System.out.println("Motor selecionado: " + $motor);
        System.out.println("Componentes disponíveis: ");
        for (Componente componente : $carro.getComponentes()) {
            System.out.println(componente.getNome() + " (Min: " + componente.getValorMinimo() + ", Max: " + componente.getValorMaximo() + ")");
        }
end